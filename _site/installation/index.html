<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Getting Started</title>
  <meta name="description" content="Generalized RAcing Intelligence Competition (GRAIC), is a synthesis competition for intelligent racing.
">
  

  <!-- External libraries -->
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/monokai-sublime.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightbox2/2.7.1/css/lightbox.css">

  <!-- Favicon and other icons (made with http://www.favicon-generator.org/) -->
  <link rel="shortcut icon" href="/assets/icons/favicon.ico" type="image/x-icon">
  <link rel="icon" href="/assets/icons/favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" sizes="57x57" href="/assets/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/assets/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/assets/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/assets/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/assets/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/assets/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/assets/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/assets/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192"  href="/assets/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/assets/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png">
  <link rel="manifest" href="/assets/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/assets/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">

  
  <!-- Facebook OGP cards -->
  <meta property="og:description" content="Generalized RAcing Intelligence Competition (GRAIC), is a synthesis competition for intelligent racing.
" />
  <meta property="og:url" content="http://localhost:4000/installation/">
  <meta property="og:site_name" content="GRAIC '22" />
  <meta property="og:title" content="Getting Started" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="http://localhost:4000/assets/logo.png" />
  <meta property="og:image:type" content="image/png" />
  <meta property="og:image:width" content="612" />
  <meta property="og:image:height" content="605" />
  

  
  <!-- Twitter: card tags -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Getting Started">
  <meta name="twitter:description" content="Generalized RAcing Intelligence Competition (GRAIC), is a synthesis competition for intelligent racing.
">
  <meta name="twitter:image" content="http://localhost:4000/assets/logo.png">
  <meta name="twitter:url" content="http://localhost:4000/installation/">
  

  

  <!-- Site styles -->
  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://localhost:4000/installation/">
	<link rel="alternate" type="application/rss+xml" title="GRAIC '22" href="http://localhost:4000/feed.xml" />

	<!-- Tooltips -->
	<script type="text/javascript">
		window.tooltips = []
	</script>

  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
</head>


  <body>

    <header class="navigation" role="banner">
  <div class="navigation-wrapper">
    <a href="/" class="logo">
      
      <img src="/assets/logo.png" alt="GRAIC '22">
      
    </a>
    <a href="javascript:void(0)" class="navigation-menu-button" id="js-mobile-menu">
      <i class="fa fa-bars"></i>
    </a>
    <nav role="navigation">
      <ul id="js-navigation-menu" class="navigation-menu show">
				
	

	

	

	

	
	<li class="nav-link"><a href="/submissions/">Submissions</a>
	

	
	<li class="nav-link"><a href="/archive/">Archive</a>
	

	
	<li class="nav-link"><a href="/outreach/">Past Events</a>
	

	
	<li class="nav-link"><a href="/documentation/">Docs</a>
	

	
	<li class="nav-link"><a href="/about/">About</a>
	

	
	<li class="nav-link"><a href="/installation/">Getting Started</a>
	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	


        <a href="https://github.com/PoPGRI/Race">Code</a>
      </ul>
    </nav>
  </div>
</header>


    <div class="page-content">
        <div>

<div class="site-header-container has-cover" style="background-image: url(/assets/baseline3.gif);">
  <div class="scrim has-cover">
    <header class="site-header">
      <h1 class="title">GRAIC '22</h1>
      <p class="subtitle">A competition for intelligent racing</p>
    </header>
  </div>
</div>

<div class="wrapper">
  
  <div>
      
      
  </div>
  
  <div>
      
      
  </div>
  
  <div>
      
      
          
          <h1>Installing GRAIC</h1>
          
          <p><p>There are two ways to use GRAIC.
You can either use our AWS image or install our docker image locally.
The instructions for both installation methods can be found below.</p>

<p><span style="color:red">Instructions for running GRAIC are included after “Installing GRAIC’s Docker image on a local machine”.</span></p>
</p>
      
  </div>
  
  <div>
      
      
          
          <h1>Installing GRAIC on AWS</h1>
          
          <p><h2 id="requirements">Requirements</h2>
<ul>
  <li>An AWS account</li>
  <li>A NoMachine client, which can be downloaded from <a href="https://www.nomachine.com/">https://www.nomachine.com/</a></li>
</ul>

<h2 id="video-tutorial">Video Tutorial</h2>
<p>(A written tutorial is included after this video tutorial)</p>

<p><span style="color:red">Note that Step 1.8 (Setting a password for Ubuntu) is not included in this video tutorial. After Step 1.7 (Review and Launch), please perform Step 1.8, and return to the video for Step 2 (GUI via NoMachine).</span></p>

<center>
<iframe width="560" height="315" src="https://www.youtube.com/embed/nqaC1ZXb4H0" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
</center>

<h2 id="step-1-creating-an-ec2-instance">Step 1. Creating an EC2 Instance</h2>
<ul>
  <li>Go to your AWS EC2 dashboard. On the top right corner, change the region to “US East (N. Virginia) us-east-1”. This step is necessary because our AMI is hosted in this region. If your connection to this region is slow and you prefer another region, please contact us, and we will copy the AMI to your preferred region.</li>
  <li>Locate the “Launch instances” button. Click on it and then follow the instructions below.</li>
</ul>

<h3 id="step-11-choose-ami">Step 1.1 Choose AMI.</h3>
<p>Search for “GRAIC-2022” and you should be able to find some AMIs in “Community AMIs”, select version 1.3
<img src="/Race/assets/ami_v1.3.png" /></p>

<h3 id="step-12-choose-an-instance-type">Step 1.2 Choose an Instance Type</h3>
<p>Choose “g4dn.4xlarge”. You can also choose “g4dn.8xlarge” if you need more CPUs.</p>

<h3 id="step-13-configure-instance-details">Step 1.3 Configure Instance Details</h3>
<p>Leave this section unchanged.</p>

<h3 id="step-14-add-storage">Step 1.4 Add Storage</h3>
<p>Leave this section unchanged.</p>

<h3 id="step-15-add-tags">Step 1.5 Add Tags</h3>
<p>Leave this section unchanged.</p>

<h3 id="step-16-configure-security-group">Step 1.6 Configure Security Group</h3>
<p>Click on “Add Rule” and add port 4000 as shown in the figure. Please note that we set the sources for both ports to “Anywhere” for simplicity, but it would be safer to restrict the sources to a smaller set, for example, the subnet owned by your university.
<img src="/Race/assets/portconfig.png" /></p>

<h3 id="step-17-review-and-launch">Step 1.7 Review and launch</h3>
<p>Finally, click on the “Launch” button which should appear at the lower right corner.
<img src="/Race/assets/launch.png" /></p>

<p>A pop-up window should appear and ask you to select an existing key pair. If you don’t have an existing key pair, select “Create a new key pair”, give it a name, and “Download Key Pair”. Then “Launch Instances”.
<img src="/Race/assets/aws_key.png" /></p>

<p>It might take several minutes to set up. Locate the new instance in your EC2 dashboard, and you can find its Public IPv4 address there.</p>

<h3 id="step-18-setting-a-password-for-the-user-ubuntu">Step 1.8 Setting a password for the user “ubuntu”</h3>
<p>You may want to set a strong password for the main user “ubuntu”. To do that, select the new instance in your EC2 dashboard and click on “Connect” which should appear at the upper right corner.
<img src="/Race/assets/instancerunning.png" /></p>

<p>Then you should be redirected to the page as shown in the figure. Change the username to “ubuntu” and click on “Connect”.
<img src="/Race/assets/connect.png" /></p>

<p>You should be able to see a new window which looks like the following picture. Change your password by running command <code class="language-plaintext highlighter-rouge">sudo passwd ubuntu</code> and following the prompts.
<img src="/Race/assets/webterminal.png" /></p>

<h2 id="step-2-gui-via-nomachine">Step 2. GUI via NoMachine</h2>
<p>Open NoMachine, click on “Add” which appears at the upper left corner.
<img src="/Race/assets/nomachine_login.png" /></p>

<p>Choose whatever name you like, and fill “Host” with your instance’s Public IPv4 address. Set “Port” to 4000 and use the NX protocol.
<img src="/Race/assets/nomachine_address.png" /></p>

<p>Click on “Configuration” on the left. Select “Use key-based authentication with a key you provide” and click on the “Modify” button. Then, select the key file downloaded in Step 1.7. Go back and click on “Connect”. If it says “key is missing”, click on the “Modify” button, select the key you downloaded, and try again. This might be a bug of NoMachine.
<img src="/Race/assets/nomachine_config.png" /></p>

<p>If asked, the username is “ubuntu”. After logging into the machine, open a terminal, run <code class="language-plaintext highlighter-rouge">~/scripts/fixCarla.sh</code>. After it finishes, you should be able to use carla by running <code class="language-plaintext highlighter-rouge">~/workspace/carla-simulator/CarlaUE4.sh</code>. All files are installed in the “~/workspace” directory. Enjoy!</p>
</p>
      
  </div>
  
  <div>
      
      
          
          <h1>Installing GRAIC's Docker image on a local machine</h1>
          
          <p><p>This section provide another option such that you can run GRAIC on your local machine with Docker.</p>

<p>GRAIC 2022 uses the <a href="https://carla.org/">CARLA simulator</a>, and CARLA is built on the <a href="https://www.unrealengine.com/en-US/">Unreal Engine</a>. That is why you will want to run the simulator on a machine with a powerful GPU. As for the software, you need the <a href="https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/install-guide.html#docker">nvidia-docker</a>.</p>

<h3 id="step-1-installing-nvidia-docker-and-getting-the-graic-docker-image">Step 1. Installing nvidia-docker and getting the GRAIC docker image</h3>
<p>Please follow the official tutorial to install the <a href="https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/install-guide.html#docker">nvidia-docker</a>.</p>

<p>After the installation, pull the GRAIC Docker image: <code class="language-plaintext highlighter-rouge">docker pull sundw2014/graic:latest</code>.</p>

<h3 id="step-2-starting-a-docker-container">Step 2. Starting a Docker container</h3>

<p>Now that everything has been installed, you can now run the GRAIC docker image. To run the GRAIC Docker container, use the following instructions.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run --name graic_con --privileged --rm --gpus all --env NVIDIA_DISABLE_REQUIRE=1 -it --net=host -e DISPLAY=$DISPLAY -v /tmp/.X11-unix:/tmp/.X11-unix:rw sundw2014/graic /bin/bash
</code></pre></div></div>

<p>Now the container is running, you can follow the instructions below to run GRAIC inside the container.</p>
</p>
      
  </div>
  
  <div>
      
      
          
          <h1>Running GRAIC</h1>
          
          <p><p>The whole racing system consists of three independent programs, the CARLA simulator, the GRAIC infrastructure, and your controller, which should be started in three terminals. If you are using Docker, you can get a new terminal connecting to the running container by running <code class="language-plaintext highlighter-rouge">docker exec -it graic_con /bin/bash</code>, where <code class="language-plaintext highlighter-rouge">graic_con</code> is the name of the running container.</p>

<h3 id="running-the-carla-simulator">Running the CARLA simulator</h3>
<p>If you are using Docker, run the following command in a new terminal</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~/workspace/carla-simulator/CarlaUE4.sh -opengl
</code></pre></div></div>

<p>If you are using AWS, run the following command in a new terminal</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~/workspace/carla-simulator/CarlaUE4.sh
</code></pre></div></div>

<p>If everthing works, you shoule be able to see the CARLA window.</p>

<h3 id="running-the-graic-infrastructure">Running the GRAIC infrastructure</h3>
<p>First, you need to update the code. To do that, run the following command</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~/scripts/update.sh
</code></pre></div></div>

<p>Then, run the following command</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>. ~/workspace/graic-workspace/devel/setup.bash
roslaunch graic_core graic_single.launch synchronous_mode_wait_for_vehicle_control_command:=True model_type:=model_free vis2D:=True
</code></pre></div></div>

<h3 id="running-the-controller">Running the controller</h3>
<p>The controller runs as a ROS node. The entry of the node is provided by GRAIC, which is a file called <code class="language-plaintext highlighter-rouge">agent_wrapper.py</code>. This file will import the user’s controller from a file called <code class="language-plaintext highlighter-rouge">user_controller_file.py</code> and also communicate with the GRAIC infrastructure. For testing, you can use the baseline controller provided in the GRAIC repository as follows.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mkdir tmp
cd tmp
cp ~/workspace/graic-workspace/src/graic_core/src/agent_wrapper.py .
cp ~/workspace/graic-workspace/src/graic_core/src/baseline.py user_controller_file.py
. ~/workspace/graic-workspace/devel/setup.bash
python3 agent_wrapper.py ego_vehicle
</code></pre></div></div>
<p>The vehicle should start moving and a score should appear when the race terminates. You should be able to see the following two windows: one is for the chase camera view, and the other one is the top view 2D visualization. In the 2D visualization, the blue box is the ego vehicle, black dots are the lane markers, and red boxes are the obstacles. If you want to disable the 2D visualization, just change <code class="language-plaintext highlighter-rouge">vis2D:=True</code> to <code class="language-plaintext highlighter-rouge">vis2D:=False</code> in the above command.</p>

<p><img src="/Race/assets/graic_vis.png" /></p>

<p>To run your own controller, just replace <code class="language-plaintext highlighter-rouge">~/workspace/graic-workspace/src/graic_core/src/baseline.py</code> in the above command with the path to your controller file.</p>
</p>
      
  </div>
  
  <div>
      
      
          
          <h1>Creating your own controller</h1>
          
          <p><p>You can use the <a href="https://github.com/PoPGRI/Race/blob/main/graic_core/src/baseline.py">baseline controller</a> as a template. In this file, only the <code class="language-plaintext highlighter-rouge">class Controller</code> is necessary. You can modify this class to implement your own controller. To further understand how to create controllers, take a look at the interfaces described on our <a href="https://popgri.github.io/Race/documentation/">docs</a> page.</p>
</p>
      
  </div>
  
</div>
</div>

    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h3 class="footer-heading">GRAIC '22</h3>

    <div class="site-navigation">

      <p><strong>Site Map</strong></p>
      <ul class="pages">
        <a href="/">Home</a>
				
	

	

	

	

	
	<li class="nav-link"><a href="/submissions/">Submissions</a>
	

	
	<li class="nav-link"><a href="/archive/">Archive</a>
	

	
	<li class="nav-link"><a href="/outreach/">Past Events</a>
	

	
	<li class="nav-link"><a href="/documentation/">Docs</a>
	

	
	<li class="nav-link"><a href="/about/">About</a>
	

	
	<li class="nav-link"><a href="/installation/">Getting Started</a>
	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	


      </ul>
    </div>

    <div class="site-contact">

      <p><strong>Contact</strong></p>
      <ul class="social-media-list">
        <li>
          <a href="mailto:graic2021@gmail.com">
            <i class="fa fa-envelope-o"></i>
            <span class="username">graic2021@gmail.com</span>
          </a>
        </li>

        
          
        
          
        
          
          <li>
            <a href="https://github.com/PoPGRI" title="Fork me on GitHub">
              <i class="fa fa-github"></i>
              <span class="username">PoPGRI</span>
            </a>
          </li>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        

      </ul>
    </div>

    <div class="site-signature">
      <!-- <p class="rss-subscribe text"><strong>Subscribe <a href="/feed.xml">via RSS</a></strong></p> -->
      <p class="text">Generalized RAcing Intelligence Competition (GRAIC), is a synthesis competition for intelligent racing.
</p>
    </div>

  </div>

</footer>

<!-- Scripts -->
<script src="//code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/highlight.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.1/js/lightbox.min.js"></script>
<script src="//unpkg.com/popper.js@1"></script>
<script src="//unpkg.com/tippy.js@5"></script>

<script type="text/javascript">
$(document).ready(function() {
  // Default syntax highlighting
  hljs.initHighlightingOnLoad();

  // Header
  var menuToggle = $('#js-mobile-menu').unbind();
  $('#js-navigation-menu').removeClass("show");
  menuToggle.on('click', function(e) {
    e.preventDefault();
    $('#js-navigation-menu').slideToggle(function(){
      if($('#js-navigation-menu').is(':hidden')) {
        $('#js-navigation-menu').removeAttr('style');
      }
    });
  });

	// Enable tooltips via Tippy.js
	if (Array.isArray(window.tooltips)) {
		window.tooltips.forEach(function(tooltip) {
			var selector = tooltip[0];
			var config = tooltip[1];
			tippy(selector, config);
		})
	}
});

</script>






  </body>

</html>
