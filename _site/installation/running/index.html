<!doctype html>
<html class="no-js" lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Running GRAIC</title>

    <link rel="stylesheet" type="text/css" href="http://localhost:4000/Race/assets/css/styles_feeling_responsive.css">

  

	<script src="http://localhost:4000/Race/assets/js/modernizr.min.js"></script>

	<script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
	<script>
		WebFont.load({
			google: {
				families: [ 'Lato:400,700,400italic:latin', 'Volkhov::latin' ]
			}
		});
	</script>

	<noscript>
		<link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic%7CVolkhov' rel='stylesheet' type='text/css'>
	</noscript>


	<!-- Search Engine Optimization -->
	<meta name="description" content="Generalized RAcing Intelligence Competition (GRAIC), is a synthesis competition for intelligent racing.">
	<meta name="google-site-verification" content="Vk0IOJ2jwG_qEoG7fuEXYqv0m2rLa8P778Fi_GrsgEQ">
	<meta name="msvalidate.01" content="0FB4C028ABCF07C908C54386ABD2D97F" >
	
	
	
	<link rel="canonical" href="http://localhost:4000/Race/installation/running/">


	<!-- Facebook Open Graph -->
	<meta property="og:title" content="Running GRAIC">
	<meta property="og:description" content="Generalized RAcing Intelligence Competition (GRAIC), is a synthesis competition for intelligent racing.">
	<meta property="og:url" content="http://localhost:4000/Race/installation/running/">
	<meta property="og:locale" content="en_EN">
	<meta property="og:type" content="website">
	<meta property="og:site_name" content="GRAIC">
	
	<meta property="article:author" content="https://www.facebook.com/phlow.media">


	
	<!-- Twitter -->
	<meta name="twitter:card" content="summary">
	<meta name="twitter:site" content="phlow">
	<meta name="twitter:creator" content="phlow">
	<meta name="twitter:title" content="Running GRAIC">
	<meta name="twitter:description" content="Generalized RAcing Intelligence Competition (GRAIC), is a synthesis competition for intelligent racing.">
	
	

	<link type="text/plain" rel="author" href="http://localhost:4000/Race/humans.txt">

	

	

	<link rel="icon" sizes="32x32" href="http://localhost:4000/Race/assets/img/favicon-32x32.png">

	<link rel="icon" sizes="192x192" href="http://localhost:4000/Race/assets/img/touch-icon-192x192.png">

	<link rel="apple-touch-icon-precomposed" sizes="180x180" href="http://localhost:4000/Race/assets/img/apple-touch-icon-180x180-precomposed.png">

	<link rel="apple-touch-icon-precomposed" sizes="152x152" href="http://localhost:4000/Race/assets/img/apple-touch-icon-152x152-precomposed.png">

	<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://localhost:4000/Race/assets/img/apple-touch-icon-144x144-precomposed.png">

	<link rel="apple-touch-icon-precomposed" sizes="120x120" href="http://localhost:4000/Race/assets/img/apple-touch-icon-120x120-precomposed.png">

	<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://localhost:4000/Race/assets/img/apple-touch-icon-114x114-precomposed.png">

	
	<link rel="apple-touch-icon-precomposed" sizes="76x76" href="http://localhost:4000/Race/assets/img/apple-touch-icon-76x76-precomposed.png">

	<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://localhost:4000/Race/assets/img/apple-touch-icon-72x72-precomposed.png">

	<link rel="apple-touch-icon-precomposed" href="http://localhost:4000/Race/assets/img/apple-touch-icon-precomposed.png">	

	<meta name="msapplication-TileImage" content="http://localhost:4000/Race/assets/img/msapplication_tileimage.png">

	<meta name="msapplication-TileColor" content="#fabb00">


	

	

	<!-- Tooltips -->
<script type="text/javascript">
	window.tooltips = []
</script>

<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>

</head>
<body id="top-of-page" class="page-fullwidth">
	
	
<div id="navigation" class="sticky">
  <nav class="top-bar" role="navigation" data-topbar>
    <ul class="title-area">
      <li class="name">
      <h1 class="show-for-small-only"><a href="http://localhost:4000/Race" class="icon-tree"> GRAIC</a></h1>
    </li>
       <!-- Remove the class "menu-icon" to get rid of menu icon. Take out "Menu" to just have icon alone -->
      <li class="toggle-topbar menu-icon"><a href="#"><span>Nav</span></a></li>
    </ul>
    <section class="top-bar-section">

      <ul class="right">
        <li class="divider"></li>
        <li><a href="https://github.com/PoPGRI/Race" target="_blank">Code</a></li>
        <li><a href="mailto:graic2021@gmail.com" target="_blank">Contact</a></li>
        <li><a href="https://groups.google.com/g/graic21" target="_blank">Forum</a></li>

        

              



          
          
        

              



          
          
        

              



          
          
        

              



          
          
        

              



          
          
        

              



          
          
        
        
      </ul>

      <ul class="left">
        

              

          
          

            
            
              <li><a  href="http://localhost:4000/Race/">Home</a></li>
              <li class="divider"></li>

            
            
          
        

              

          
          

            
            

              <li class="has-dropdown">
                <a  href="http://localhost:4000/Race/installation/">Getting Started</a>

                  <ul class="dropdown">
                    

                      

                      <li><a  href="http://localhost:4000/Race/installation/aws/">AWS Installation</a></li>
                    

                      

                      <li><a  href="http://localhost:4000/Race/installation/docker/">Docker Installation</a></li>
                    

                      

                      <li><a  href="http://localhost:4000/Race/installation/running/">Running GRAIC</a></li>
                    

                      

                      <li><a  href="http://localhost:4000/Race/installation/multi/">Running GRAIC -- Multi-Agent(BETA)</a></li>
                    
                  </ul>

              </li>
              <li class="divider"></li>
            
          
        

              

          
          

            
            

              <li class="has-dropdown">
                <a  href="http://localhost:4000/Race/documentation/">Docs</a>

                  <ul class="dropdown">
                    

                      

                      <li><a  href="http://localhost:4000/Race/documentation/perception/">Perception</a></li>
                    

                      

                      <li><a  href="http://localhost:4000/Race/documentation/decision-control/">Decision and Control</a></li>
                    

                      

                      <li><a  href="http://localhost:4000/Race/documentation/models/">Vehicle Models</a></li>
                    

                      

                      <li><a  href="http://localhost:4000/Race/documentation/rosmsgs/">ROS Messages</a></li>
                    

                      

                      <li><a  href="http://localhost:4000/Race/documentation/tracks/">Tracks</a></li>
                    
                  </ul>

              </li>
              <li class="divider"></li>
            
          
        

              

          
          

            
            
              <li><a  href="http://localhost:4000/Race/submissions/">Submission</a></li>
              <li class="divider"></li>

            
            
          
        

              

          
          

            
            
              <li><a  href="http://localhost:4000/Race/about/">About</a></li>
              <li class="divider"></li>

            
            
          
        

              

          
          

            
            
              <li><a  href="http://localhost:4000/Race/outreach/">Past events</a></li>
              <li class="divider"></li>

            
            
          
        
        
      </ul>
    </section>
  </nav>
</div><!-- /#navigation -->

	

	







	


<div class="row t30">
	<div class="medium-12 columns">
		<article>
			<header>
				
				<h1>Running GRAIC</h1>
			</header>

			

			<div class="row">
<div class="medium-4 medium-push-8 columns">
    <div class="panel radius">
      <p id="toc"><strong>Table of Contents</strong></p>
<ul id="markdown-toc">
  <li><a href="#running-the-carla-simulator" id="markdown-toc-running-the-carla-simulator">Running the CARLA simulator</a></li>
  <li><a href="#running-the-graic-infrastructure" id="markdown-toc-running-the-graic-infrastructure">Running the GRAIC infrastructure</a></li>
  <li><a href="#running-the-controller" id="markdown-toc-running-the-controller">Running the controller</a></li>
</ul>

    </div>
  </div><!-- /.medium-4.columns -->



<div class="medium-8 medium-pull-4 columns">

    <p>The whole racing system consists of three independent programs, the CARLA simulator, the GRAIC infrastructure, and your controller, which should be started in three terminals. If you are using Docker, you can get a new terminal connecting to the running container by running</p>

    <div class="alert-box terminal ">docker exec -it graic_con /bin/bash</div>

    <p>where <code class="language-plaintext highlighter-rouge">graic_con</code> is the name of the running container.</p>

    <h3 id="running-the-carla-simulator">Running the CARLA simulator</h3>
    <p>If you are using Docker, run the following command in a new terminal</p>

    <div class="alert-box terminal ">~/workspace/carla-simulator/CarlaUE4.sh -opengl</div>

    <p>If you are using AWS, run the following command in a new terminal</p>

    <div class="alert-box terminal ">~/workspace/carla-simulator/CarlaUE4.sh</div>

    <p>If everthing works, you shoule be able to see the CARLA window.</p>

    <h3 id="running-the-graic-infrastructure">Running the GRAIC infrastructure</h3>
    <p>First, you need to update the code. To do that, run the following command</p>

    <div class="alert-box terminal ">~/scripts/update.sh</div>

    <p>Then, run the following command</p>

    <div class="alert-box terminal ">. ~/workspace/graic-workspace/devel/setup.bash</div>

    <div class="alert-box terminal ">roslaunch graic_core graic_single.launch synchronous_mode_wait_for_vehicle_control_command:=True model_type:=model_free vis2D:=True</div>

    <h3 id="running-the-controller">Running the controller</h3>
    <p>The controller runs as a ROS node. The entry of the node is provided by GRAIC, which is a file called <code class="language-plaintext highlighter-rouge">agent_wrapper.py</code>. This file will import the user’s controller from a file called <code class="language-plaintext highlighter-rouge">user_controller_file.py</code> and also communicate with the GRAIC infrastructure. For testing, you can use the baseline controller provided in the GRAIC repository as follows.</p>

    <div class="alert-box terminal ">mkdir tmp</div>

    <div class="alert-box terminal ">cd tmp</div>

    <div class="alert-box terminal ">cp ~/workspace/graic-workspace/src/graic_core/src/agent_wrapper.py .</div>

    <div class="alert-box terminal ">cp ~/workspace/graic-workspace/src/graic_core/src/baseline.py user_controller_file.py</div>

    <div class="alert-box terminal ">. ~/workspace/graic-workspace/devel/setup.bash</div>

    <div class="alert-box terminal ">python3 agent_wrapper.py ego_vehicle</div>

    <p>The vehicle should start moving and a score should appear when the race terminates. You should be able to see the following two windows: one is for the chase camera view, and the other one is the top view 2D visualization. In the 2D visualization, the blue box is the ego vehicle, black dots are the lane markers, and red boxes are the obstacles. If you want to disable the 2D visualization, just change <code class="language-plaintext highlighter-rouge">vis2D:=True</code> to <code class="language-plaintext highlighter-rouge">vis2D:=False</code> in the above command.</p>

    <p><img src="https://popgri.github.io/Race/assets/images/graic_vis.png" /></p>

    <p>To run your own controller, just replace <code class="language-plaintext highlighter-rouge">~/workspace/graic-workspace/src/graic_core/src/baseline.py</code> in the above command with the path to your controller file.</p>

    <p>You can use the <a href="https://github.com/PoPGRI/Race/blob/main/graic_core/src/baseline.py">baseline controller</a> as a template. In this file, only the <code class="language-plaintext highlighter-rouge">class Controller</code> is necessary. You can modify this class to implement your own controller. To further understand how to create controllers, take a look at the interfaces described on our <a href="https://popgri.github.io/Race/documentation/">docs</a> page.</p>
  </div>
</div>

		</article>
	</div><!-- /.medium-12.columns -->
</div><!-- /.row -->


	
	    <div id="up-to-top" class="row">
      <div class="small-12 columns" style="text-align: right;">
        <a class="iconfont" href="#top-of-page">&#xf108;</a>
      </div><!-- /.small-12.columns -->
    </div><!-- /.row -->


    <footer id="footer-content" class="bg-grau">
      <div id="footer">
        <div class="row">
          <div class="medium-6 large-5 columns">
            <h5 class="shadow-black">About This Site</h5>

            <p class="shadow-black">
              Generalized RAcing Intelligence Competition (GRAIC), is a synthesis competition for intelligent racing. 
              <!-- <a href="http://localhost:4000/Race/info/">More ›</a> -->
            </p>
          </div><!-- /.large-6.columns -->


          <div class="small-6 medium-3 large-3 large-offset-1 columns">
            
              
                <h5 class="shadow-black">Site map</h5>
              
            
              
            
              
            
              
            
              
            
              
            

              <ul class="no-bullet shadow-black">
              
                
                  <li >
                    <a href="http://localhost:4000/Race"  title=""></a>
                  </li>
              
                
                  <li >
                    <a href="http://localhost:4000/Race/contact/"  title="Contact">Home</a>
                  </li>
              
                
                  <li >
                    <a href="http://localhost:4000/Race/feed.xml"  title="Subscribe to RSS Feed">Getting Started</a>
                  </li>
              
                
                  <li >
                    <a href="http://localhost:4000/Race/atom.xml"  title="Subscribe to Atom Feed">Docs</a>
                  </li>
              
                
                  <li >
                    <a href="http://localhost:4000/Race/sitemap.xml"  title="Sitemap for Google Webmaster Tools">About</a>
                  </li>
              
                
                  <li >
                    <a href="http://localhost:4000/Race/sitemap.xml"  title="Sitemap for Google Webmaster Tools">Past Events</a>
                  </li>
              
              </ul>
          </div><!-- /.large-4.columns -->


          <div class="small-6 medium-3 large-3 columns">
            
              
                <h5 class="shadow-black">Contact</h5>
              
            
              
            
              
            
              
            

            <ul class="no-bullet shadow-black">
            
              
                <li >
                  <a href="http://localhost:4000/Race"  title=""></a>
                </li>
            
              
                <li >
                  <a href="https://groups.google.com/g/graic21" target="_blank"  title="GRAIC forum">Forum</a>
                </li>
            
              
                <li >
                  <a href="http://localhost:4000/Racemailto:graic2021@gmail.com"  title="Email us!">graic2021@gmail.com</a>
                </li>
            
              
                <li >
                  <a href="https://github.com/PoPGRI/Race" target="_blank"  title="GRAIC source code">GRAIC code</a>
                </li>
            
            </ul>
          </div><!-- /.large-3.columns -->
        </div><!-- /.row -->

      </div><!-- /#footer -->


      <div id="subfooter">
        <nav class="row">
          <section id="subfooter-left" class="small-12 medium-6 columns credits">
            <p>Created by <a href="https://publish.illinois.edu/kristinamiller/">Kristina Miller</a> with <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> based on <a href="http://phlow.github.io/feeling-responsive/">Feeling Responsive</a> by <a href="http://phlow.de/">Phlow</a>.</p>
          </section>

          <section id="subfooter-right" class="small-12 medium-6 columns">
            <ul class="inline-list social-icons">
            
              <li><a href="https://github.com/PoPGRI/Race" target="_blank" class="icon-github" title="GRAIC source code"></a></li>
            
              <li><a href="https://www.youtube.com/channel/UC1wObn3tWYZDkWld-Kg8LRA" target="_blank" class="icon-youtube" title="Videos"></a></li>
            
            </ul>
          </section>
        </nav>
      </div><!-- /#subfooter -->
    </footer>

	

	


<script src="http://localhost:4000/Race/assets/js/javascript.min.js"></script>












</body>
</html>

